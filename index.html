<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luxehome-calc</title>
    <link rel="stylesheet" href="styles/style.css">
</head>
<body>
    <div class="calc-header">
        <div class="calc-h-left">
            <h1 class="calc-title">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å —à—Ç–æ—Ä—ã</h1>
            <p class="calc-opis">–†–∞—Å—á–µ—Ç –∑–∞–π–º–µ—Ç –Ω–µ –±–æ–ª–µ–µ 5 –º–∏–Ω—É—Ç.</p>
        </div>
        <div class="calc-h-right">
            <div class="cr-opis">
                <h1 class="calc-summa">155.000 –†—É–±–ª–µ–π</h1>
                <p class="calc-srok">–°—Ä–æ–∫ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –¥–æ 10 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π</p>
            </div>
            <div class="knopki">
              <div class="merge-btn-container">
                <a href="" class="text-part">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</a>
                <a href="" class="icon-part">
    <img src="images/Arrow 76.svg" class="icon-part-tw arrow-tw arrow-1tw" alt="">
    <img src="images/Arrow 76inv.svg" class="icon-part-tw arrow-tw arrow-2tw" alt="">
                </a>
              </div>
        </div>
        </div>
    </div>
    <div class="calc-windows">
        <div class="c-window-1">
            <p class="cw-zag">–û–∫–Ω–æ 1</p>
            <button class="remove-btn">
                <img src="images/delete-icon.svg" alt="">
            </button>
        </div>
        <div class="c-window-1">
            <p class="cw-zag">–û–∫–Ω–æ 2</p>
            <button class="remove-btn">
                <img src="images/delete-icon.svg" alt="">
            </button>
        </div>
        <div class="c-window-add">
            <p class="add-cw">–î–æ–±–∞–≤–∏—Ç—å –æ–∫–Ω–æ</p>
            <button class="add-win">
                +
            </button>
        </div>
    </div>
    <div class="calc-block">
        <div class="calc-block-left">
            <h2 class="calc-vopros">–ö–∞–∫–∏–µ —à—Ç–æ—Ä—ã –≤–∞–º –Ω—É–∂–Ω—ã?</h2>
            <div class="shtory-tabs">
    <div class="sht-tab" data-target="rim">–†–∏–º—Å–∫–∏–µ —à—Ç–æ—Ä—ã</div>
    <div class="sht-tab is-active" data-target="classic">–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ —à—Ç–æ—Ä—ã –ø–æ—Ä—Ç—å–µ—Ä—ã</div>
</div>
            <div class="shtory-icon">
                <img src="images/classic-sht.svg" alt="" class="shtory-img">
            </div>
        </div>
        <div class="content-classic-shtory is-active">
        <div class="calc-block-right">
            <div class="calc-fields">
            <div class="calc-field">
  <input
    type="text"
    name="height"
    inputmode="decimal"
    autocomplete="off"
    placeholder=" "
    required
    data-max="3.1"
  >
  <label>–í—ã—Å–æ—Ç–∞ –æ—Ç –ø–æ–ª–∞ –¥–æ –ø–æ—Ç–æ–ª–∫–∞, –º (–ú–∞–∫—Å. 3.1 –º–µ—Ç—Ä–∞)</label>
</div>

<div class="calc-field">
  <input
    type="text"
    name="cornice_length"
    inputmode="decimal"
    autocomplete="off"
    placeholder=" "
    required
  >
  <label>–î–ª–∏–Ω–∞ –∫–∞—Ä–Ω–∏–∑–∞, –º</label>
</div>
        </div>

        <h3 class="koef-sb">–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Å–±–æ—Ä–∫–∏</h3>
        <div class="koef-tabs">
            <div class="koef-btn is-active" data-koef="1.5">
                <img src="images/ks-1.svg" alt="" class="ks-icon">
                <p class="koef-text">1:1.5</p>
            </div>
            <div class="koef-btn" data-koef="2">
                <img src="images/ks-2.svg" alt="" class="ks-icon">
                <p class="koef-text">1:2</p>
            </div>
            <div class="koef-btn" data-koef="2.5">
                <img src="images/ks-3.svg" alt="" class="ks-icon">
                <p class="koef-text">1:2.5</p>
            </div>
        </div>
        <h3 class="tkan-select">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∫–∞–Ω—å</h3>
        <div class="ts-tabs">
            <div class="tkan-tab is-active" data-price="2000">–ë–ª—ç–∫–∞—É—Ç</div>
            <div class="tkan-tab" data-price="2200">–î–∏–º–∞—É—Ç</div>
            <div class="tkan-tab" data-price="2500">–§–∞–∫—Ç—É—Ä–Ω–∞—è —Ç–∫–∞–Ω—å</div>
        </div>
        <div class="cbr-bottom">
            <button class="add-to-calc">–î–æ–±–∞–≤–∏—Ç—å –≤ —Ä–∞—Å—á–µ—Ç</button>
            <div class="calc-price">‚Äî</div>
        </div>

        </div>
        </div>

        
        <div class="content-rim-shtory">
            <div class="calc-block-right">
            <div class="calc-fields">
            <div class="calc-field">
  <input
    type="text"
    name="windowsill_width"
    inputmode="decimal"
    autocomplete="off"
    placeholder=" "
    required
  >
  <label>–®–∏—Ä–∏–Ω–∞ –ø–æ–¥–æ–∫–æ–Ω–Ω–∏–∫–∞, —Å–º</label>
</div>

<div class="calc-field">
  <input
    type="text"
    name="window_height"
    inputmode="decimal"
    autocomplete="off"
    placeholder=" "
    required
  >
  <label>–í—ã—Å–æ—Ç–∞ –æ–∫–Ω–∞, —Å–º</label>
</div>
        </div>

        <h3 class="tkan-select">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∫–∞–Ω—å</h3>
        <div class="ts-tabs">
            <div class="tkan-tab is-active" data-price="2000">–ë–ª—ç–∫–∞—É—Ç</div>
            <div class="tkan-tab" data-price="2200"–º>–î–∏–º–∞—É—Ç</div>
            <div class="tkan-tab" data-price="2500">–§–∞–∫—Ç—É—Ä–Ω–∞—è —Ç–∫–∞–Ω—å</div>
        </div>
        <h2 class="rsht-karniz">–ö–∞—Ä–Ω–∏–∑ –≤—Ö–æ–¥–∏—Ç –≤ —Å—Ç–æ–∏–º–æ—Å—Ç—å.</h2>
        <h3 class="rsht-dop-zag">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ</h3>
        <div class="dop-tabs">
            <div class="dop-btn" data-extra="montage">
                <p class="dop-opis">–ú–æ–Ω—Ç–∞–∂</p>
                <p class="dop-price">+3.500‚ÇΩ</p>
            </div>
            <div class="dop-btn" data-extra="delivery">
                <p class="dop-opis">–î–æ—Å—Ç–∞–≤–∫–∞</p>
                <p class="dop-price">+1.000‚ÇΩ</p>
            </div>
        </div>
        <div class="cbr-bottom">
            <button class="add-to-calc">–î–æ–±–∞–≤–∏—Ç—å –≤ —Ä–∞—Å—á–µ—Ç</button>
            <div class="calc-price">55.000 –†—É–±–ª–µ–π</div>
        </div>

        </div>
        </div>
    </div>
    






<script>
(function () {
  function sanitizeDecimal(raw) {
    // –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã + . ,
    let v = raw.replace(/[^\d.,]/g, '');

    // –µ—Å–ª–∏ –µ—Å—Ç—å –∏ —Ç–æ—á–∫–∞ –∏ –∑–∞–ø—è—Ç–∞—è ‚Äî —Å—á–∏—Ç–∞–µ–º –∑–∞–ø—è—Ç—É—é –¥–µ—Å—è—Ç–∏—á–Ω—ã–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º,
    // –∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –≤—ã–∫–∏–¥—ã–≤–∞–µ–º
    const hasDot = v.includes('.');
    const hasComma = v.includes(',');

    if (hasDot && hasComma) {
      // –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –∑–∞–ø—è—Ç—É—é –∫–∞–∫ –¥–µ—Å—è—Ç–∏—á–Ω—ã–π, —Ç–æ—á–∫–∏ —É–±–∏—Ä–∞–µ–º
      v = v.replace(/\./g, '');
    }

    // —Ç–µ–ø–µ—Ä—å –¥–µ–ª–∞–µ–º –µ–¥–∏–Ω—ã–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å: –∑–∞–ø—è—Ç–∞—è
    // (—Ç–∞–∫ —É–¥–æ–±–Ω–µ–µ –≤–≤–æ–¥–∏—Ç—å –≤ RU-–ª–æ–∫–∞–ª–∏; –ø—Ä–∏ —Ä–∞—Å—á—ë—Ç–∞—Ö –∑–∞–º–µ–Ω–∏–º –Ω–∞ —Ç–æ—á–∫—É)
    // —Ä–∞–∑—Ä–µ—à–∞–µ–º —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –∑–∞–ø—è—Ç—É—é
    const parts = v.split(',');
    if (parts.length > 2) {
      v = parts[0] + ',' + parts.slice(1).join('');
    }

    // –µ—Å–ª–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∑–∞–ø—è—Ç–æ–π ‚Äî –ø—Ä–µ–≤—Ä–∞—â–∞–µ–º –≤ "0,"
    if (v.startsWith(',')) v = '0' + v;

    // —É–±–∏—Ä–∞–µ–º –≤–µ–¥—É—â–∏–µ –Ω—É–ª–∏ —Ç–∏–ø–∞ 00012 (–Ω–æ –æ—Å—Ç–∞–≤–ª—è–µ–º 0,5)
    v = v.replace(/^0+(?=\d)/, '0');

    return v;
  }

  document.addEventListener('input', function (e) {
    const input = e.target;
    if (!input.matches('.calc-field input')) return;

    const before = input.value;
    const after = sanitizeDecimal(before);

    if (before !== after) input.value = after;
  });

  document.addEventListener('blur', function (e) {
    const input = e.target;
    if (!input.matches('.calc-field input')) return;

    let v = sanitizeDecimal(input.value);

    // –µ—Å–ª–∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –∑–∞–ø—è—Ç—É—é ‚Äî —É–±–∏—Ä–∞–µ–º
    if (v.endsWith(',')) v = v.slice(0, -1);

    // max –¥–ª—è –≤—ã—Å–æ—Ç—ã (–µ—Å–ª–∏ –∑–∞–¥–∞–Ω data-max)
    const maxAttr = input.dataset.max;
    if (maxAttr && v) {
      const num = parseFloat(v.replace(',', '.'));
      const max = parseFloat(maxAttr);
      if (!Number.isNaN(num) && num > max) v = String(max).replace('.', ',');
    }

    input.value = v;
  }, true);
})();
</script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const tabs = document.querySelectorAll('.sht-tab');
  const classic = document.querySelector('.content-classic-shtory');
  const rim = document.querySelector('.content-rim-shtory');
  const img = document.querySelector('.shtory-img');

  const images = {
    classic: 'images/classic-sht.svg',
    rim: 'images/rim-sht.svg'
  };

  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      tabs.forEach(t => t.classList.remove('is-active'));
      tab.classList.add('is-active');

      const type = tab.dataset.target;
      calcState.type = type;

      classic.classList.toggle('is-active', type === 'classic');
      rim.classList.toggle('is-active', type === 'rim');

      img.src = images[type];

      // –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ ‚Äî —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Ü–µ–Ω—É
      document.querySelector('.content-classic-shtory .calc-price').textContent = '‚Äî';
    });
  });
});
</script>




<script>
const calcState = {
  type: 'classic',   // üëà –ö–õ–Æ–ß–ï–í–û
  classic: {
    length: 0,
    koef: 1.5,
    fabricPrice: 2000
  }
};
</script>

<script>
function recalcPrice() {
  if (calcState.type !== 'classic') return;

  const { length, koef, fabricPrice } = calcState.classic;
  const priceEl = document.querySelector('.content-classic-shtory .calc-price');

  if (!length) {
    priceEl.textContent = '‚Äî';
    return;
  }

  const price = length * koef * fabricPrice * 2;

  priceEl.textContent =
    Math.round(price).toLocaleString('ru-RU') + ' ‚ÇΩ';
}
</script>

<script>
document.addEventListener('input', e => {
  if (calcState.type !== 'classic') return;

  const input = e.target;

  if (input.name === 'cornice_length') {
    calcState.classic.length =
      parseFloat(input.value.replace(',', '.')) || 0;
    recalcPrice();
  }
});
</script>

<script>
document.querySelectorAll('.koef-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    if (calcState.type !== 'classic') return;

    document.querySelectorAll('.koef-btn')
      .forEach(b => b.classList.remove('is-active'));

    btn.classList.add('is-active');
    calcState.classic.koef = parseFloat(btn.dataset.koef);
    recalcPrice();
  });
});
</script>

<script>
document.querySelectorAll('.content-classic-shtory .tkan-tab')
  .forEach(tab => {
    tab.addEventListener('click', () => {
      document
        .querySelectorAll('.content-classic-shtory .tkan-tab')
        .forEach(t => t.classList.remove('is-active'));

      tab.classList.add('is-active');
      calcState.classic.fabricPrice = parseFloat(tab.dataset.price);
      recalcPrice();
    });
  });
</script>



<script>
calcState.rim = {
  width: 0,     // —Å–º
  height: 0,    // —Å–º
  fabricPrice: 2000, 
  extras: {
    montage: false,
    delivery: false
  }
};
</script>

<script>
function recalcRimPrice() {
  if (calcState.type !== 'rim') return;

  const { width, height, fabricPrice, extras } = calcState.rim;
  const priceEl = document.querySelector('.content-rim-shtory .calc-price');

  if (!width || !height) {
    priceEl.textContent = '‚Äî';
    return;
  }

  const w = width / 100;
  const h = (height + 15) / 100;

  let price =
    5000 * w +                  // –±–∞–∑–æ–≤–∞—è —á–∞—Å—Ç—å
    1000 +                      // –∫–∞—Ä–Ω–∏–∑
    fabricPrice * (w + 0.2) +   // ‚úÖ —Ç–∫–∞–Ω—å (–ò–°–ü–†–ê–í–õ–ï–ù–û)
    h * w * 2500 +              // –ø–æ—à–∏–≤
    h * w * 500;                // –ª–µ–Ω—Ç–∞

  // –¥–æ–ø—ã
  if (extras.montage) price += 3500;
  if (extras.delivery) price += 1000;

  priceEl.textContent =
    Math.round(price).toLocaleString('ru-RU') + ' ‚ÇΩ';
}

</script>

<script>
document.addEventListener('input', e => {
  if (calcState.type !== 'rim') return;

  const input = e.target;

  if (input.name === 'windowsill_width') {
    calcState.rim.width =
      parseFloat(input.value.replace(',', '.')) || 0;
    recalcRimPrice();
  }

  if (input.name === 'window_height') {
    calcState.rim.height =
      parseFloat(input.value.replace(',', '.')) || 0;
    recalcRimPrice();
  }
});
</script>

<script>
document
  .querySelectorAll('.content-rim-shtory .tkan-tab')
  .forEach(tab => {
    tab.addEventListener('click', () => {
      document
        .querySelectorAll('.content-rim-shtory .tkan-tab')
        .forEach(t => t.classList.remove('is-active'));

      tab.classList.add('is-active');

      calcState.rim.fabricPrice =
        parseFloat(tab.dataset.price) || 0;

      recalcRimPrice();
    });
  });

</script>

<script>
document
  .querySelectorAll('.content-rim-shtory .dop-btn')
  .forEach(btn => {
    btn.addEventListener('click', () => {
      btn.classList.toggle('is-active');

      const type = btn.dataset.extra;
      calcState.rim.extras[type] = btn.classList.contains('is-active');

      recalcRimPrice();
    });
  });
</script>


</body>
</html>